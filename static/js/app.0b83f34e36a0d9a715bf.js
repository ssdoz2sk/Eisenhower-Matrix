webpackJsonp([1],{29:function(t,e,i){"use strict";var n=i(17),s=i(75),a=i(70),l=i.n(a);n.a.use(s.a),e.a=new s.a({mode:"history",routes:[{path:"/",name:"Hello",props:!0,component:l.a},{path:"/p/:id",name:"Hello",props:!0,component:l.a},{path:"*",component:l.a}]})},30:function(t,e,i){function n(t){i(36)}var s=i(16)(i(32),i(73),n,null,null);t.exports=s.exports},31:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(17),s=i(30),a=i.n(s),l=i(29);n.a.config.productionTip=!1,new n.a({el:"#app",router:l.a,template:"<App/>",components:{App:a.a}})},32:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(42),s=i.n(n),a=s.a.initializeApp({apiKey:"AIzaSyDUrmO0CmQhXe74I7txd8jDmwHAMszxCPA",authDomain:"eisenhower-fed8a.firebaseapp.com",databaseURL:"https://eisenhower-fed8a.firebaseio.com"}),l=new s.a.auth.GoogleAuthProvider;e.default={name:"app",firebase:function(){return{user:null,noteList:{},firebasedb:a.database()}},data:function(){return{firebase:a,firebasedb:a.database(),user:null,noteList:{}}},beforeCreate:function(){s.a.auth().onAuthStateChanged(function(t){var e=this;t?(this.user=t,this.firebasedb.ref("noteList/").child(t.uid).once("value").then(function(t){e.noteList=t.val(),e.noteList||(e.noteList={}),console.log(e.noteList)})):this.user=null}.bind(this))},methods:{onSignIn:function(){s.a.auth().signInWithPopup(l)},onSignOut:function(){s.a.auth().signOut()}}}},33:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(77),s=i.n(n),a=i(71),l=i.n(a);e.default={name:"note",data:function(){return{editAble:!0,isDragging:!1,delayedDragging:!1,list:[],list2:[],list3:[],list4:[],selectElement:null,editingElement:null,showModal:!1,editing:!1,adding:!1,addingList:null,publishLink:"",showAlert:!1,showMessage:""}},components:{draggable:s.a,Modal:l.a},props:{user:{type:Object,default:null},firebasedb:{type:Object,default:null}},mounted:function(){var t=this,e=0,i=setInterval(function(){if(e++,t.user||e>=5){clearInterval(i);var n=t.$route.params.id,s=null;if(console.log(n),t.user)n?n===t.user.uid?(t.editAble=!0,t.publishLink=window.location.host+"/p/"+n,s=t.firebasedb.ref("eisenhower").child(n)):(t.editAble=!1,s=t.firebasedb.ref("eisenhower").child(n),t.publishLink=window.location.host+"/p/"+n):(t.editAble=!0,s=t.firebasedb.ref("eisenhower").child(t.user.uid),t.publishLink=window.location.host+"/p/"+t.user.uid);else{if(!n)return t.editAble=!1,console.log("Please Login"),t.showAlert=!0,void(t.showMessage="請先登入");t.editAble=!1,s=t.firebasedb.ref("eisenhower").child(n),t.publishLink=window.location.host+"/p/"+n}s.on("value",function(e){var i=e.val();t.list=i.do||[],t.list2=i.decide||[],t.list3=i.delegate||[],t.list4=i.delete||[]})}},250)},methods:{save:function(){if(this.user){this.firebasedb.ref("eisenhower").child(this.user.uid).set({do:this.list,decide:this.list2,delegate:this.list3,delete:this.list4,updateTime:(new Date).getTime()}).then(function(){}).catch(function(t){console.error("Error writing new message to Firebase Database",t)})}},onMove:function(t){var e=t.relatedContext,i=t.draggedContext,n=e.element,s=i.element;return!(n&&n.fixed||s.fixed)},onMoveEnd:function(){this.isDragging=!1,this.save()},onDel:function(){var t=this.editingList.indexOf(this.selectElement);t>-1&&this.editingList.splice(t,1),this.showModal=!1},onEdit:function(t,e){this.editingList=t,this.selectElement=e,this.editingElement={title:e.title,content:e.content,estimatedTime:e.estimatedTime,usedTime:e.usedTime},this.showModal=!0},onEditDone:function(){""!==this.editingElement.title.trim()&&(this.adding?this.editingList.push({title:this.editingElement.title,content:this.editingElement.content,estimatedTime:this.editingElement.estimatedTime,usedTime:this.editingElement.usedTime,fixed:!1}):(this.selectElement.title=this.editingElement.title,this.selectElement.content=this.editingElement.content,this.selectElement.estimatedTime=this.editingElement.estimatedTime,this.selectElement.usedTime=this.editingElement.usedTime),this.showModal=!1,this.adding=!1,this.editing=!1,this.save())},onCancel:function(){this.adding=!1,this.editing=!1,this.showModal=!1},onCreate:function(t){this.editingList=t,this.editingElement={title:"",content:"",estimatedTime:0,usedTime:0},this.adding=!0,this.editing=!0,this.showModal=!0}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!this.editAble,ghostClass:"ghost"}}},watch:{isDragging:function(t){var e=this;if(t)return void(this.delayedDragging=!0);this.$nextTick(function(){e.delayedDragging=!1})}}}},34:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"modal",data:function(){return{showModal:!1}}}},35:function(t,e){},36:function(t,e){},37:function(t,e){},70:function(t,e,i){function n(t){i(35)}var s=i(16)(i(33),i(72),n,"data-v-49d5ddd8",null);t.exports=s.exports},71:function(t,e,i){function n(t){i(37)}var s=i(16)(i(34),i(74),n,null,null);t.exports=s.exports},72:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("h1",[t._v("艾森豪魔術方塊")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.showAlert,expression:"showAlert == true"}],staticClass:"alert alert-warning"},[i("strong",[t._v("Warning!")]),t._v(" "+t._s(t.showMessage)+"\n  ")]),t._v(" "),i("div",{staticClass:"table"},[t._m(0),t._v(" "),i("div",{staticClass:"table-row"},[i("div",{staticClass:"table-th"},[t._v("重要")]),t._v(" "),i("div",{staticClass:"table-cell"},[i("draggable",{staticClass:"list-group fill-cell",attrs:{element:"ul",options:t.dragOptions,move:t.onMove},on:{start:function(e){t.isDragging=!0},end:t.onMoveEnd},model:{value:t.list,callback:function(e){t.list=e},expression:"list"}},[t._l(t.list,function(e){return i("li",{key:e.order,staticClass:"list-group-item item",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.onEdit(t.list,e)}}},[i("i",{class:e.fixed?"fa fa-anchor":"glyphicon glyphicon-pushpin",attrs:{"aria-hidden":"true"},on:{click:function(t){e.fixed=!e.fixed}}}),t._v("\n            "+t._s(e.title)+"\n          ")])}),t._v(" "),i("li",{staticClass:"list-group-item",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.onCreate(t.list)}},slot:"footer"},[t._v("\n            增加\n          ")])],2)],1),t._v(" "),i("div",{staticClass:"table-cell"},[i("draggable",{staticClass:"list-group fill-cell",attrs:{element:"ul",options:t.dragOptions,move:t.onMove},on:{start:function(e){t.isDragging=!0},end:t.onMoveEnd},model:{value:t.list2,callback:function(e){t.list2=e},expression:"list2"}},[t._l(t.list2,function(e){return i("li",{key:e.order,staticClass:"list-group-item item",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.onEdit(t.list2,e)}}},[i("i",{class:e.fixed?"fa fa-anchor":"glyphicon glyphicon-pushpin",attrs:{"aria-hidden":"true"},on:{click:function(t){e.fixed=!e.fixed}}}),t._v("\n            "+t._s(e.title)+"\n          ")])}),t._v(" "),i("li",{staticClass:"list-group-item",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.onCreate(t.list2)}},slot:"footer"},[t._v("\n            增加\n          ")])],2)],1)]),t._v(" "),i("div",{staticClass:"table-row"},[i("div",{staticClass:"table-th"},[t._v("不重要")]),t._v(" "),i("div",{staticClass:"table-cell"},[i("draggable",{staticClass:"list-group fill-cell",attrs:{element:"ul",options:t.dragOptions,move:t.onMove},on:{start:function(e){t.isDragging=!0},end:t.onMoveEnd},model:{value:t.list3,callback:function(e){t.list3=e},expression:"list3"}},[t._l(t.list3,function(e){return i("li",{key:e.order,staticClass:"list-group-item item",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.onEdit(t.list3,e)}}},[i("i",{class:e.fixed?"fa fa-anchor":"glyphicon glyphicon-pushpin",attrs:{"aria-hidden":"true"},on:{click:function(t){e.fixed=!e.fixed}}}),t._v("\n            "+t._s(e.title)+"\n          ")])}),t._v(" "),i("li",{staticClass:"list-group-item",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.onCreate(t.list3)}},slot:"footer"},[t._v("\n            增加\n          ")])],2)],1),t._v(" "),i("div",{staticClass:"table-cell"},[i("draggable",{staticClass:"list-group fill-cell",attrs:{element:"ul",options:t.dragOptions,move:t.onMove},on:{start:function(e){t.isDragging=!0},end:t.onMoveEnd},model:{value:t.list4,callback:function(e){t.list4=e},expression:"list4"}},[t._l(t.list4,function(e){return i("li",{key:e.order,staticClass:"list-group-item item",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.onEdit(t.list4,e)}}},[i("i",{class:e.fixed?"fa fa-anchor":"glyphicon glyphicon-pushpin",attrs:{"aria-hidden":"true"},on:{click:function(t){e.fixed=!e.fixed}}}),t._v("\n              "+t._s(e.title)+"\n          ")])}),t._v(" "),i("li",{staticClass:"list-group-item",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.onCreate(t.list4)}},slot:"footer"},[t._v("\n            增加\n          ")])],2)],1)])]),t._v(" "),i("div",[t._v("publish link: "),i("a",{attrs:{href:t.publishLink}},[t._v(t._s(t.publishLink))])]),t._v(" "),t.showModal?i("modal",{on:{close:function(e){t.showModal=!1}}},[i("div",{slot:"header"},[i("h3",{directives:[{name:"show",rawName:"v-show",value:0==t.editing,expression:"editing == false"}]},[t._v(t._s(t.editingElement.title))]),t._v(" "),i("h3",[i("input",{directives:[{name:"show",rawName:"v-show",value:1==t.editing,expression:"editing == true"},{name:"model",rawName:"v-model",value:t.editingElement.title,expression:"editingElement.title"}],staticClass:"form-control fill-cell",attrs:{placeholder:"標題"},domProps:{value:t.editingElement.title},on:{input:function(e){e.target.composing||(t.editingElement.title=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"fill-cell",slot:"body"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.editing,expression:"editing == false"}],staticClass:"fill-cell fill-cell-90p"},[i("span",{staticClass:"fill-cell"},[t._v("\n          "+t._s(t.editingElement.content)+"\n        ")])]),t._v(" "),i("textarea",{directives:[{name:"show",rawName:"v-show",value:1==t.editing,expression:"editing == true"},{name:"model",rawName:"v-model",value:t.editingElement.content,expression:"editingElement.content"}],staticClass:"form-control fill-cell fill-cell-90p",attrs:{placeholder:"內容"},domProps:{value:t.editingElement.content},on:{input:function(e){e.target.composing||(t.editingElement.content=e.target.value)}}}),t._v(" "),i("div",{staticClass:"row "},[i("div",{staticClass:"col-xs-4"},[i("label",{staticClass:"label-ellipsis"},[t._v("預計總時間")])]),t._v(" "),i("div",{staticClass:"col-xs-8 "},[i("span",{directives:[{name:"show",rawName:"v-show",value:0==t.editing,expression:"editing == false"}]},[t._v(t._s(t.editingElement.estimatedTime))]),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:1==t.editing,expression:"editing == true"},{name:"model",rawName:"v-model",value:t.editingElement.estimatedTime,expression:"editingElement.estimatedTime"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.editingElement.estimatedTime},on:{input:function(e){e.target.composing||(t.editingElement.estimatedTime=e.target.value)},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"row "},[i("div",{staticClass:"col-xs-4"},[i("label",{staticClass:"label-ellipsis"},[t._v("已花費時間")])]),t._v(" "),i("div",{staticClass:"col-xs-8 "},[i("span",{directives:[{name:"show",rawName:"v-show",value:0==t.editing,expression:"editing == false"}]},[t._v(t._s(t.editingElement.usedTime))]),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:1==t.editing,expression:"editing == true"},{name:"model",rawName:"v-model",value:t.editingElement.usedTime,expression:"editingElement.usedTime"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.editingElement.usedTime},on:{input:function(e){e.target.composing||(t.editingElement.usedTime=e.target.value)},blur:function(e){t.$forceUpdate()}}})])])]),t._v(" "),i("div",{slot:"footer"},[i("button",{staticClass:"btn btn-danger footer-left",on:{click:t.onDel}},[t._v("刪除")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:0==t.editing,expression:"editing == false"}],staticClass:"btn btn-warning footer-left",on:{click:function(e){t.editing=!0}}},[t._v("編輯")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:1==t.editing,expression:"editing == true"}],staticClass:"btn btn-warning footer-left",on:{click:function(e){t.editing=!1}}},[t._v("完成")]),t._v(" "),i("button",{staticClass:"btn btn-success",on:{click:t.onEditDone}},[t._v("確定")]),t._v(" "),i("button",{staticClass:"btn btn-default",on:{click:t.onCancel}},[t._v("取消")])])]):t._e()],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table-row"},[i("div",{staticClass:"table-th"}),t._v(" "),i("div",{staticClass:"table-th"},[t._v("急迫")]),t._v(" "),i("div",{staticClass:"table-th"},[t._v("不急迫")])])}]}},73:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("nav",{staticClass:"navbar navbar-fixed-top navbar-inverse"},[i("div",{staticClass:"container"},[i("div",{staticClass:"navbar-header"},[t._m(0),t._v(" "),i("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/"},id:"logo"}},[t._v("艾森豪魔術方塊")])],1),t._v(" "),i("div",{staticClass:"navbar-collapse collapse",attrs:{id:"navbar","aria-expanded":"true"}},[i("ul",{staticClass:"nav navbar-nav navbar-right"},[t.user?t._e():i("li",{on:{click:t.onSignIn}},[i("a",[t._v("Login")])]),t._v(" "),t.user?i("li",[i("a",[i("img",{staticStyle:{height:"28px",width:"28px"},attrs:{src:t.user.photoURL}}),t._v(t._s(t.user.displayName))])]):t._e(),t._v(" "),t.user?i("li",{on:{click:t.onSignOut}},[i("a",[t._v("Logout")])]):t._e()])])])]),t._v(" "),i("div",{staticClass:"fluid container"},[i("router-view",{attrs:{user:t.user,firebasedb:t.firebasedb}})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"navbar-toggle collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbar","aria-expanded":"false","aria-controls":"navbar"}},[i("span",{staticClass:"sr-only"},[t._v("Toggle navigation")]),t._v(" "),i("span",{staticClass:"icon-bar"}),t._v(" "),i("span",{staticClass:"icon-bar"}),t._v(" "),i("span",{staticClass:"icon-bar"})])}]}},74:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper"},[i("div",{staticClass:"modal-container"},[i("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n            default header\n          ")])],2),t._v(" "),i("div",{staticClass:"modal-body"},[t._t("body",[t._v("\n            default body\n          ")])],2),t._v(" "),i("div",{staticClass:"modal-footer"},[t._t("footer",[t._v("\n            default footer\n            "),i("button",{staticClass:"modal-default-button",on:{click:function(e){t.$emit("close")}}},[t._v("\n              OK\n            ")])])],2)])])])])},staticRenderFns:[]}}},[31]);
//# sourceMappingURL=app.0b83f34e36a0d9a715bf.js.map